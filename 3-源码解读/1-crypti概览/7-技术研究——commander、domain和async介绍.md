进行中...

# 技术研究——commander、domain和async介绍

时间不等人，原本想在元宵节前后多发整理几篇文章出来的，结果还是仅仅多赶出来一篇。这篇文章，只好慢慢整理。

## 前言

从前面的源码中，我们注意到commander、domain和async三个组件（或模块）的应用，对整个app.js程序起到了至关重要的作用。作为技术积累，有必要对他们进行深入探究。这里，就按照我个人的理解，描述一下这三个组件（模块）的使用。

## 关于知识的思考

我坚信，搞编程的都是学习高手，智商都很高。但不同的人，方法迥异。有的人天生聪颖，一看就会，翻翻源码和文档，就能在项目中自由使用。相反，有的人就不行，我个人就算典型的一个，愚钝至极。

我经常遇到这样的情况，对于某个组件，这次用对了，下次出现问题，还需要再看文档，特别是对于方法的选择上，有时候需要反复试验。所以，多年来，我认真总结和改进自己的做法，虽然不能做到“一看就会”，但要努力做到“一用就对”。

这关系到“知识”的理解和吸收，知识由语言组成，语言由概念和逻辑组成，概念和逻辑涉及到人的记忆能力与分析能力。很多人喜欢逻辑上的思考，而对于概念“视而不见”。生活中，我们经常听到有人描述事件的时候，经常用“那个、高个”等代词或形容词代替事件中的人物，就属这种现象。

事实上，概念中含有逻辑，是逻辑的高级浓缩版。概念清晰，逻辑必然是清晰的，相反却未必。因此，学习知识，掌握概念最重要；创新知识，创造概念也很重要。

比如，什么是模块，什么叫组件？我的理解是，Nodejs提供的原生功能模块，叫`模块`（`module`，例如：domain)，而第三方提供的独立功能模块称为`组件`(``)，其实他们都叫`中间件`（`middleware`)，本质没什么区别。

但是，在自己的思维逻辑中，这么简单的区分一下，其实表明我们掌握了更多信息，比如在文档、代码质量、可信度等方面，`模块`天生要好于`组件`（否则，不会放到核心代码里）。知道`domain`是模块，自然会去nodejs官网去找最可靠的资料（官方计划废弃，不提倡再使用了）。

因此，我的做法就是解读概念（官方提供）、提炼概念（官方没有）、解释概念（介绍用法），用自己的理解梳理相关知识。这里的概念不以“全”为目标，以“好记、好用、好区分”为主。

下面，以commander、domain和async在app.js中出现的顺序为准，分别介绍。

## Commander

（1）概念定义：简单易用的命令行工具开发组件。

（2）概念解释：

>这是一个`组件`，说明是第三方开发的，其实就是开发`Express`的大神`tj`开发的。ruby语言也有一个同名的开发组件，也是`tj`的杰作，所以，虽为组件，但足够权威，`您值得拥有`。
>`命令行工具开发`，`Commander`的英文解释是`命令`，如其名字，这个是用来开发命令行`命令`的。
>`简单易用`，怎么简单？三个函数、三个步骤而已。

（3）用法介绍：



## 链接
