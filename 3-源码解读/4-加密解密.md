进行中...

# 在Nodejs中使用加密解密技术


## 前言

加密解密技术在加密货币的作用不言而喻。但技术本身并不是什么新鲜事，重要的是如果没有前面的P2P网络，和后面要介绍的区块链，单独的加解密显然毫无意义。

所以，`不死的`P2P网络，搭载无懈可击的加密技术，架构在神秘的区块链之上，加密货币才成为无需验证、高度可信的强大网络。

但是，说句实话，提到加解密技术，我们只能限于`使用`，从不会用到会用的过程，不敢用`研究`二字来形容，只能限于学习。

因为加解密技术的核心是`算法`，而算法可能要穷其一生去研究和探索。相对于具体应用，甚至Nodejs，我们可以从其源码中研究并改进，而算法则不太可能。至少，我很清楚自己的智商是远远不够的。

所以，严格按照文档去做，别自作聪明，是使用加密解密技术的最安全方式。这篇就来研究`Ebookcoin`是如何使用加解密技术的。

## 源码

`Ebookcoin`没有提供相关扩展，全部使用Nodejs自己的`crypto`模块进行加密解密。使用该模块的代码比较多，请看下面的类图。

## 类图

![crypto-class.png][]

## 流程图

![crypto-activity.png][]

## 解读

#### 加密过程

Nodejs的`Crypto`模块，提供了一种封装安全凭证的方式，用于HTTPS网络或HTTP连接，也对OpenSSL的Hash，HMAC，加密，解密、签名和验证方法进行了封装。

在币圈里，谈到加密技术时，经常听到Hash算法。很多小盆友时常与数组（array）和散列（hash）等数据格式混淆，以为Hash算法获得的结果都像json格式的键值对似的。

其实，这是语言上的差异，`Hash`还有`n. 混杂，拼凑; vt. 搞糟，把…弄乱`的意思。所以，所谓的hash算法，解释为混杂算法或弄乱算法，更加直观些。

纵览`Crypto`模块的使用，我们发现，`Ebookcoin`使用的是`sha256`Hash算法，这是经过很多人验证的有效安全的算法之一（请看参考），主要是下面的简单调用：

```
var hash = crypto.createHash('sha256').update(data).digest()
```

这个语句是链式调用，拆开来看，就是`crypto.createHash('sha256')`先创建一个Hash实例，`sha256`是加密算法，还包括MD5,sha1,sha512等;接着使用`.update(data)`接受`明文`data数据，也就是我们要加密的数据，最后调用`.digest()`方法，获得加密结果。

#### 解密过程

Ed25519是一个数字签名算法：签名和验证的性能都极高， 一个4核2.4GHz 的 Westmere cpu，每秒可以验证 71000 个签名安全性极高，等价于RSA约3000-bit；签名过程不依赖随机数生成器，不依赖hash函数的防碰撞性，没有时间通道攻击的问题，并且签名很小，只有64字节，公钥也很小，只有32字节。

#### 具体用途

(1)



## 总结

## 链接

## 参考

[Ed25519官方网站](http://ed25519.cr.yp.to/)

[现代密码学实践指南(2015年)](http://blog.helong.info/blog/2015/06/05/modern-crypto/)

[密码学一小时必知](http://blog.helong.info/blog/2015/04/12/translate-Everything-you-need-to-know-about-cryptgraphy-in-1-hour/)

[crypto-class.png]: ../styles/images/modules/crypto/class.png
[crypto-activity.png]: ../styles/images/modules/crypto/activity.png
